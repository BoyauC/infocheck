<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å‡è¨Šæ¯æŸ¥æ ¸å·¥å…·</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        .animate-pulse {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
    <div id="app"></div>

    <script>
        // æ‡‰ç”¨ç¨‹å¼ç‹€æ…‹
        let state = {
            topic: '',
            started: false,
            currentStep: 1,
            answers: {},
            result: null
        };

        // å•é¡Œå®šç¾©
        const questions = {
            1: {
                question: 'æª¢é©—è¨Šæ¯çš„æåŠç‰¹å¾µæ˜¯å¦é©ç•¶ï¼ˆå¦‚ï¼šå¹´é½¡ã€èƒŒæ™¯ã€æƒ…å½¢ç­‰ï¼‰ï¼Œæˆ–èˆ‡å‡è¨­é‡é»ä¸€è‡´ï¼Œç‚ºæ°‘æ„ç›¸é—œå‰‡åˆ¥æ–¼è¢«æŠ½æ¨£ç”Ÿæ´»ç¯„åœç‰¹æ€§ã€æŠ½æ¨£é™åˆ¶ã€‚',
                options: [
                    { id: '1a', text: 'é©ç•¶', next: 2 },
                    { id: '1b', text: 'æª¢é©—è¨Šæ¯çš„æåŠå’Œå…§å®¹çœ‹èµ·ä¾†æ¥è¿‘ä¸”å®Œæ•´', next: 2 }
                ]
            },
            2: {
                question: 'æª¢é©—ç™¼å¸ƒè¨Šæ¯çš„å–®ä½å’Œä½œè€…',
                options: [
                    { id: '2a', text: 'æª¢é©—ç™¼å¸ƒè¨Šæ¯çš„å–®ä½å’Œä½œè€…ï¼Œç¢ºèªæ˜¯å¦å±¬å…¬å…±æ©Ÿæ§‹æˆ–å¯ä¿¡æ©Ÿæ§‹ï¼ˆä¾‹å¦‚ï¼šå…¬åª’ã€ä¸­å¤®ç¤¾ã€æ”¿åºœæˆ–å­¸æ ¡å–®ä½ï¼‰', next: 3 },
                    { id: '2b', text: 'æª¢é©—ç™¼å¸ƒè¨Šæ¯çš„å–®ä½å’Œä½œè€…ï¼Œç¢ºèªæ˜¯å¦èƒ½å–å¾—å…¶è©³ç´°è¯çµ¡æ–¹å¼ï¼ˆå§“åã€è¯çµ¡é›»è©±ç­‰ï¼‰æˆ–è€…èƒ½é€²è¡Œè¯ç¹«æˆ–å–å¾—è¯çµ¡è³‡è¨Š', next: 3 }
                ]
            },
            3: {
                question: 'æª¢é©—è¨Šæ¯ä¾†æº',
                options: [
                    { id: '3a', text: 'ã€æ”¿ç­–å®£å‚³ã€‘æ”¿åºœéƒ¨æœƒç›´æ¥ç™¼ä½ˆçš„å®˜åª’æˆ–æ”¿åºœå®£å‚³ç¤¾ç¾¤å¸³è™Ÿï¼Œæˆ–è¢«å…¬é–‹ç™¼ä½ˆæ–¼ã€Œå®˜æ–¹è³‡æ–™åº«ã€', next: 4 },
                    { id: '3b', text: 'ã€æ°‘æ„ç´ æã€‘æ”¿åºœæ©Ÿé—œè³‡æ–™åº«æåŠæˆ–åª’é«”æ­éœ²ä¹‹ç ”ç©¶è³‡æ–™èªªæ˜ä¾†æºï¼Œæˆ–æœ‰æ˜ç¢ºè¯çµ¡ç®¡é“ï¼Œæˆ–åª’é«”é€²è¡Œå ±å°æˆ–æ±‚è­‰åŠè­°å“¡è³ªè©¢æˆ–æŠ•è¨´ç­‰å…¬çœ¾è³‡æº', next: 4 }
                ]
            },
            4: {
                question: 'è¨Šæ¯å…§å®¹æª¢é©—',
                options: [
                    { id: '4a', text: 'è¨Šæ¯å…§å®¹èƒ½ç”±å·²å»ºç½®è½‰å‚³ï¼ˆå¦‚ï¼šå…¬é–‹å¹³å°æª¢é©—æˆ–æå‡ºèªªæ˜æˆ–æˆ‘å€‘çš„äº‹å¯¦æŸ¥æ ¸å¹³å°èƒ½æå‡ºèªªæ˜æˆ–æª¢æ ¸è³‡æ–™ï¼Œç²å¾—æŸ¥æ ¸çš„ç¶“æ¿Ÿèˆ‡é›»åŠ›å»ºè¨­ï¼‰', next: 5 },
                    { id: '4b', text: 'è¨Šæ¯å·²ç”±ã€Œå°ˆå®¶ç™¼ç¾ã€ï¼ˆå…§éƒ¨ç¢ºèªï¼‰ã€Œåœ˜éšŠã€æˆ–æœ‰å¯¦æ–½æ¡ˆä¾‹åŸºæº–æˆ–æåŠæˆ–è³‡æ–™èˆ‡ç™¼å¸ƒã€æˆ–åƒ…ç‚ºç³»çµ±ç¶“ç”±è¦æ±‚å‚³å…¬é–‹æ•…æ„å‚³å…¥ç‰©ã€', next: 5 }
                ]
            },
            5: {
                question: 'èªå¢ƒè„ˆçµ¡æª¢é©—',
                options: [
                    { id: '5a', text: 'ã€èªå¢ƒè„ˆçµ¡ã€‘æˆ‘æ•¸é–‹çš„äº‹æ”¶åå‘èƒŒæ™¯ï¼Œç™¼ç¾è¢«æ¨™é‡å·²ç™¼ç¾è¨Šæ¡†ç´€æˆ–æ³', next: 6 },
                    { id: '5b', text: 'ã€èªå¢ƒè„ˆçµ¡ã€‘æˆ‘æ•¸é–‹çš„äº‹æ”¶åå‘èƒŒæ™¯ï¼Œç™¼ç¾è¢«ç¶“å¸¸ç¶“ç”¨é«”ã€å°ˆäººå¹³ç†åˆæˆæˆ–å…·ã€ç¶“åè…¦å½±éŸ¿æˆ–æ–‡åŒ–å°å¾Œäº‹ä»¶ï¼Œå·²å¯¦è¡Œä¿®æ­£å¾Œæˆ–å¤§å¹…åº¦ç›´ç”¨é«”', next: 6 }
                ]
            },
            6: {
                question: 'å¤šæ–¹æ¯”å°æª¢é©—',
                options: [
                    { id: '6a', text: 'ã€å¤šæ–¹æ¯”å°ã€‘æˆ‘ç”¨ç”¨ç›´åˆçš„æš—éŸ¿å­—è£¡è¡Œæ–¼ç­‰ã€‚ä¿®é–‹å¤šå®¶åª’é«”ä¸”åŒè³ªçš„æ”¶æ„Ÿå–æ–¹æš´æ‡‰æˆ–ç™¼å°±åœæ›¾ï¼ŒåŒæ™‚ç™¼ç«¯æ”¶åé«”åŒ–å‡å”ç­‰ã€‚èª¤é–“ä¸¦æ­£ç¢ºå¯ä¿¡', next: 'result' },
                    { id: '6b', text: 'ã€å¤šæ–¹æ¯”å°ã€‘æˆ‘ç”¨ç”¨ç›´åˆçš„æš—éŸ¿å­—è£¡åˆç­‰ã€‚æŠ€æœ¯æˆ‘è¨¼ä½•å…·åœ–ä¸è³ªè©¢æ¡†å€‹åŸºï¼Œæˆå·²åœ–æèƒŒå¦æ”¯æ‡‰ï¼Œç™¼éŸ¿æˆ–å€‹æˆ–ä¸å…¬è¨¼ã€è­¦å¯Ÿç…§ä»£æˆ–åœä¸åŒæ€§ç½®ï¼Œæˆ–ç™¼æ¥ä»£æš´å·²èªçš„å‘ä¿®åœå¯ä¿¡', next: 'result' }
                ]
            }
        };

        // è¨ˆç®—çµæœ
        function calculateResult(finalAnswerId) {
            const greenAnswers = ['1a', '2a', '3a', '4a', '5a', '6a'];
            const yellowAnswers = ['1b', '2b', '3b', '4b', '5b'];
            const redAnswers = ['6b'];

            const allAnswers = Object.values(state.answers);
            allAnswers.push(finalAnswerId);

            if (redAnswers.includes(finalAnswerId)) {
                return {
                    light: 'red',
                    title: 'ç´…ç‡ˆ - é«˜åº¦å¯ç–‘è¨Šæ¯',
                    reason: 'æ­¤è¨Šæ¯å­˜åœ¨å¤šè™•ç–‘é»ï¼ŒåŒ…æ‹¬ä¾†æºä¸æ˜ç¢ºã€å…§å®¹ç„¡æ³•æŸ¥è­‰æˆ–ç¶“å¤šæ–¹æ¯”å°ç™¼ç¾çŸ›ç›¾ã€‚å»ºè­°ä¸è¦è½‰å‚³æ­¤è¨Šæ¯ã€‚'
                };
            }

            const greenCount = allAnswers.filter(a => greenAnswers.includes(a)).length;
            const yellowCount = allAnswers.filter(a => yellowAnswers.includes(a)).length;

            if (greenCount >= 5) {
                return {
                    light: 'green',
                    title: 'ç¶ ç‡ˆ - å¯ä¿¡åº¦é«˜',
                    reason: 'æ­¤è¨Šæ¯ä¾†æºå¯é ã€å…§å®¹ç¶“éæŸ¥è­‰ï¼Œä¸”èˆ‡å®˜æ–¹è³‡æ–™æˆ–å¤šæ–¹ä¾†æºç›¸ç¬¦ã€‚å¯ä»¥å®‰å¿ƒåˆ†äº«ã€‚'
                };
            } else if (greenCount >= 3 || yellowCount >= 3) {
                return {
                    light: 'yellow',
                    title: 'é»ƒç‡ˆ - éœ€è¬¹æ…åˆ¤æ–·',
                    reason: 'æ­¤è¨Šæ¯éƒ¨åˆ†å…§å®¹å¯ä¿¡ï¼Œä½†ä»æœ‰å¾…é€²ä¸€æ­¥æŸ¥è­‰ã€‚å»ºè­°åœ¨åˆ†äº«å‰å…ˆå°‹æ±‚æ›´å¤šè­‰æ“šæˆ–å®˜æ–¹èªªæ˜ã€‚'
                };
            } else {
                return {
                    light: 'red',
                    title: 'ç´…ç‡ˆ - é«˜åº¦å¯ç–‘è¨Šæ¯',
                    reason: 'æ­¤è¨Šæ¯ç¼ºä¹è¶³å¤ çš„å¯ä¿¡ä¾†æºå’Œè­‰æ“šæ”¯æŒã€‚å»ºè­°ä¸è¦è½‰å‚³æ­¤è¨Šæ¯ã€‚'
                };
            }
        }

        // æ¸²æŸ“å‡½æ•¸
        function render() {
            const app = document.getElementById('app');
            
            if (!state.started) {
                app.innerHTML = renderStartScreen();
            } else if (state.result) {
                app.innerHTML = renderResultScreen();
            } else {
                app.innerHTML = renderQuestionScreen();
            }
        }

        function renderStartScreen() {
            return `
                <div class="p-8 fade-in">
                    <div class="max-w-2xl mx-auto">
                        <div class="bg-white rounded-lg shadow-xl p-8">
                            <h1 class="text-3xl font-bold text-gray-800 mb-2">ğŸ¯ å‡è¨Šæ¯æŸ¥æ ¸å·¥å…·</h1>
                            <p class="text-gray-600 mb-8">æ•¸å­—åª’é«”èˆ‡æ°‘æ„æŸ¥æ ¸è¡¨</p>
                            
                            <div class="mb-6">
                                <label class="block text-lg font-medium text-gray-700 mb-3">
                                    è«‹è¼¸å…¥è¦æŸ¥æ ¸çš„è¨Šæ¯ä¸»é¡Œï¼š
                                </label>
                                <input
                                    type="text"
                                    id="topicInput"
                                    placeholder="ä¾‹å¦‚ï¼šæŸæ”¿ç­–çš„ç¶²è·¯å‚³è¨€"
                                    class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-lg"
                                />
                            </div>
                            
                            <button
                                onclick="handleStart()"
                                class="w-full bg-blue-600 text-white py-3 px-6 rounded-lg font-medium text-lg hover:bg-blue-700 transition-colors"
                            >
                                é–‹å§‹æŸ¥æ ¸ â†’
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderQuestionScreen() {
            const currentQ = questions[state.currentStep];
            const progress = (state.currentStep / 6) * 100;

            return `
                <div class="p-8 fade-in">
                    <div class="max-w-2xl mx-auto">
                        <div class="bg-white rounded-lg shadow-xl p-8">
                            <div class="mb-6">
                                <h2 class="text-xl font-bold text-gray-800 mb-2">ğŸ” æŸ¥æ ¸ä¸»é¡Œï¼š${state.topic}</h2>
                                <div class="flex items-center gap-2">
                                    <div class="flex-1 bg-gray-200 rounded-full h-2">
                                        <div 
                                            class="bg-blue-600 h-2 rounded-full transition-all duration-300"
                                            style="width: ${progress}%"
                                        ></div>
                                    </div>
                                    <span class="text-sm text-gray-600">æ­¥é©Ÿ ${state.currentStep}/6</span>
                                </div>
                            </div>

                            <div class="mb-8">
                                <h3 class="text-lg font-semibold text-gray-700 mb-1">æ­¥é©Ÿ ${state.currentStep}</h3>
                                <p class="text-gray-800 text-lg leading-relaxed mb-6">
                                    ${currentQ.question}
                                </p>

                                <div class="space-y-3">
                                    ${currentQ.options.map((option, index) => `
                                        <button
                                            onclick="handleAnswer('${option.id}', ${typeof option.next === 'number' ? option.next : "'result'"})"
                                            class="w-full text-left p-4 border-2 border-gray-300 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-all duration-200 group"
                                        >
                                            <div class="flex items-start gap-3">
                                                <span class="flex-shrink-0 w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center text-gray-700 font-medium group-hover:bg-blue-500 group-hover:text-white transition-colors">
                                                    ${String.fromCharCode(65 + index)}
                                                </span>
                                                <span class="text-gray-700 group-hover:text-gray-900 flex-1">
                                                    ${option.text}
                                                </span>
                                            </div>
                                        </button>
                                    `).join('')}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderResultScreen() {
            const lightColors = {
                green: 'bg-green-500',
                yellow: 'bg-yellow-500',
                red: 'bg-red-500'
            };

            const textColors = {
                green: 'text-green-500',
                yellow: 'text-yellow-500',
                red: 'text-red-500'
            };

            const icons = {
                green: 'âœ“',
                yellow: 'âš ',
                red: 'âœ—'
            };

            return `
                <div class="p-8 fade-in">
                    <div class="max-w-2xl mx-auto">
                        <div class="bg-white rounded-lg shadow-xl p-8">
                            <h2 class="text-2xl font-bold text-gray-800 mb-4">ğŸ” æŸ¥æ ¸ä¸»é¡Œï¼š${state.topic}</h2>
                            
                            <div class="flex flex-col items-center my-8">
                                <div class="${lightColors[state.result.light]} w-32 h-32 rounded-full flex items-center justify-center mb-6 shadow-lg animate-pulse">
                                    <span class="text-white text-6xl font-bold">${icons[state.result.light]}</span>
                                </div>
                                
                                <h3 class="text-2xl font-bold mb-4 ${textColors[state.result.light]}">
                                    ${state.result.title}
                                </h3>
                                
                                <div class="bg-gray-50 rounded-lg p-6 w-full">
                                    <p class="text-gray-700 text-lg leading-relaxed">
                                        ${state.result.reason}
                                    </p>
                                </div>
                            </div>

                            <div class="mt-8 pt-6 border-t border-gray-200">
                                <h4 class="font-semibold text-gray-700 mb-3">ğŸ“‹ æŸ¥æ ¸æ­·ç¨‹ï¼š</h4>
                                <div class="space-y-2">
                                    ${Object.entries(state.answers).map(([step, answerId]) => `
                                        <div class="text-sm text-gray-600 bg-gray-50 p-2 rounded">
                                            æ­¥é©Ÿ ${step}: ${answerId}
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                            
                            <button
                                onclick="handleReset()"
                                class="w-full mt-8 bg-gray-600 text-white py-3 px-6 rounded-lg font-medium text-lg hover:bg-gray-700 transition-colors"
                            >
                                ğŸ”„ é‡æ–°æŸ¥æ ¸
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        // äº‹ä»¶è™•ç†å‡½æ•¸
        function handleStart() {
            const input = document.getElementById('topicInput');
            if (input.value.trim()) {
                state.topic = input.value.trim();
                state.started = true;
                render();
            }
        }

        function handleAnswer(answerId, nextStep) {
            state.answers[state.currentStep] = answerId;

            if (nextStep === 'result') {
                state.result = calculateResult(answerId);
            } else {
                state.currentStep = nextStep;
            }
            render();
        }

        function handleReset() {
            state = {
                topic: '',
                started: false,
                currentStep: 1,
                answers: {},
                result: null
            };
            render();
        }

        // åˆå§‹åŒ–
        render();
    </script>
</body>
</html>
